// case.js
Page({

  /**
   * 页面的初始数据
   */
  data: {
    topBar: [{
      name: '全部案例'
    }, {
      name: '网站开发',
      cases: [{
        title: '寰球建设',
        img: 'http://mini.0315678.cn/wxImg/case/web1.jpg',
        index: 1,
        className: '工程建设',
        seeNum: 888,
        detailPic: [{
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-pc/pc-1-1.jpg',
          text: '寰球路桥建设工程管理有限公司主营业务为建筑施工总承包，路桥工程施工，大型工装等；历经多年的风雨兼程和顽强拚搏，已发展壮大为国家房屋建筑工程施工一流企业。公司一直贯彻“以人为本，服务社会”的经营理念;“优质高速，诚守信誉，持续发展”的质量方针，依靠科技进步、强化管理，坚持走质量兴业之路，多次荣获市级、省级荣誉证书。'
        }]
      }, {
        title: '寰球传媒',
        img: 'http://mini.0315678.cn/wxImg/case/web2.jpg',
        index: 1,
        className: '传媒',
        seeNum: 888,
        detailPic: [{
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-pc/pc-2-1.jpg',
          text: '寰球金盾影视传媒有限公司是集团转型的关键所在，通过加大对影视传媒、活动策划等第三产业的投资，最终实现以建筑、信息，文化,绿化产业为主的多方位经营模式。寰球金盾影视传媒有限公司尊崇“踏实、拼搏、责任”的企业精神，并以诚信、共赢、开创经营理念，以全新的管理模式，完善的技术，周到的服务，卓越的品质为生存根本，我们始终坚持用户至上用心服务于客户，坚持用自己的服务去打动客户。;“优质高速，诚守信誉，持续发展”的质量方针，依靠科技进步、强化管理，坚持走质量兴业之路，多次荣获市级、省级荣誉证书。'
        }]
      }, {
        title: '寰球集团',
        img: 'http://mini.0315678.cn/wxImg/case/web3.jpg',
        index: 1,
        className: '官网',
        seeNum: 888,
        detailPic: [{
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-pc/pc-3-1.jpg',
          text: '寰球集团有限公司是一家集系统集成、建筑工程、园林绿化、影视传媒于一体的集团公司。管理创造价值，服务提升优势，品质至上，服务至优”是寰球集团的发展理念，团结、创新、务实、奋进是集团矢志不渝的追求。我们倍加珍惜每一分荣誉，坚持"质量第一、用户至上、以质兴业、以优取胜"的经营宗旨，始终秉承诚信为本，服务永恒的原则，从2007年一家小型弱电安防公司逐步发展成为拥有四家子公司的集团企业。'
        }]
      }, {
        title: '寰球信息',
        img: 'http://mini.0315678.cn/wxImg/case/web4.jpg',
        index: 1,
        className: '信息工程',
        seeNum: 888,
        detailPic: [{
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-pc/pc-4-1.jpg',
          text: '寰球信息工程有限公司自创立以来一直专业致力于智能化信息工程；始终坚持发扬"诚信、创新、沟通"为企业宗旨，以"技术、服务"为立业之本的团体精神，并形成一套完整的设计、安装、调试、培训、维护一站式服务体系。公司拥有一支高素质的管理人员和成熟的技术队伍，具备强大的施工力量及雄厚的技术力量，在能源、军队、学校、医院、银行、机关事业单位等方面取得了优良成绩。,绿化产业为主的多方位经营模式。寰球金盾影视传媒有限公司尊崇“踏实、拼搏、责任”的企业精神，并以诚信、共赢、开创经营理念，以全新的管理模式，完善的技术，周到的服务，卓越的品质为生存根本，我们始终坚持用户至上用心服务于客户，坚持用自己的服务去打动客户。;“优质高速，诚守信誉，持续发展”的质量方针，依靠科技进步、强化管理，坚持走质量兴业之路，多次荣获市级、省级荣誉证书。'
        }]
      }, {
        title: '寰球园林',
        img: 'http://mini.0315678.cn/wxImg/case/web5.jpg',
        index: 1,
        className: '园林建设',
        seeNum: 888,
        detailPic: [{
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-pc/pc-5-1.jpg',
          text: '寰球绿色生态工程有限公司是一家专业从事园林景观设计、景观规划设计、公园景观设计施工的绿化工程公司。可承接各类型项目的室内外环境综合景观工程，包括园林绿化,园林市政道路,园林建筑,假山雕塑,城市广场景观、公园景观、广场规划景观、别墅私家花园景观设计施工等工程。寰球园林绿化工程有限公司专注于环境资源的保护、规划和利用，珍惜每寸土地，师法自然，传承文化，努力创造舒适优美的现代人居环境。公司从设计、施工到养护全方位,一条龙服务方式,多年来所做工程后期回访口碑极佳,得到业内人士一致好评！做一个好工程，交一批好朋友是我们的经营理念。客户的赞语是对我们的最高奖赏，我们将以更加饱满的热情、认真的态度、锐意进取、开拓创新的精神致力于“百分之百的优良工程”。我们愿与社会各界人士携手共创美好的绿色家园。,绿化产业为主的多方位经营模式。寰球金盾影视传媒有限公司尊崇“踏实、拼搏、责任”的企业精神，并以诚信、共赢、开创经营理念，以全新的管理模式，完善的技术，周到的服务，卓越的品质为生存根本，我们始终坚持用户至上用心服务于客户，坚持用自己的服务去打动客户。;“优质高速，诚守信誉，持续发展”的质量方针，依靠科技进步、强化管理，坚持走质量兴业之路，多次荣获市级、省级荣誉证书。'
        }]
      }, {
        title: '德国万骏马业',
        img: 'http://mini.0315678.cn/wxImg/case/web6.jpg',
        index: 1,
        className: '马术',
        seeNum: 888,
        detailPic: [{
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-pc/pc-6-1.jpg',
          text: '德国万骏马业贸易有限公司，驻扎于德国汉堡市，以全部马术运动娱乐项目；马匹繁育及护理；马术装备与设施；马房管理与马匹营养等方面领航的德国为依托，为广大的中国马圈马友提供全方位服务。,绿化产业为主的多方位经营模式。寰球金盾影视传媒有限公司尊崇“踏实、拼搏、责任”的企业精神，并以诚信、共赢、开创经营理念，以全新的管理模式，完善的技术，周到的服务，卓越的品质为生存根本，我们始终坚持用户至上用心服务于客户，坚持用自己的服务去打动客户。;“优质高速，诚守信誉，持续发展”的质量方针，依靠科技进步、强化管理，坚持走质量兴业之路，多次荣获市级、省级荣誉证书。'
        }]
      }]
    }, {
      name: '小程序开发',
      cases: []
    }, {
      name: '公众号开发',
      cases: [{
        title: '定制包车',
        img: 'http://mini.0315678.cn/wxImg/case/gongzhong1.jpg',
        index: 3,
        className: '旅行',
        seeNum: 888,
        detailPic: [{
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-1-1.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-1-2.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-1-3.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-1-4.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-1-5.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-1-6.jpg'
        }]
      }, {
        title: '公交查询',
        img: 'http://mini.0315678.cn/wxImg/case/gongzhong2.jpg',
        index: 3,
        className: '旅行',
        seeNum: 888,
        detailPic: [{
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-2-1.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-2-2.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-2-3.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-2-4.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-2-5.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-2-6.jpg'
        }]
      }, {
        title: '机场专线',
        img: 'http://mini.0315678.cn/wxImg/case/gongzhong3.jpg',
        index: 3,
        className: '旅行',
        seeNum: 888,
        detailPic: [{
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-3-1.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-3-2.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-3-3.jpg'

        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-3-4.jpg'

        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-3-5.jpg'

        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-3-6.jpg'

        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-3-7.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-3-8.jpg'

        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-3-9.jpg'

        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-3-10.jpg'

        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-3-11.jpg'

        }]
      }, {
        title: '客运购票',
        img: 'http://mini.0315678.cn/wxImg/case/gongzhong4.jpg',
        index: 3,
        className: '旅行',
        seeNum: 888,
        detailPic: [{
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-4-1.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-4-2.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-4-3.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-4-4.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-4-5.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-4-6.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-4-7.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-4-8.jpg'
        }]
      }, {
        title: '顺风旅游',
        img: 'http://mini.0315678.cn/wxImg/case/gongzhong5.jpg',
        index: 3,
        className: '旅行',
        seeNum: 888,
        detailPic: [{
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-5-1.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-5-2.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-5-3.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-5-4.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-5-5.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-5-6.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-5-7.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-5-8.jpg'
        }]
      }, {
        title: '预约班车',
        img: 'http://mini.0315678.cn/wxImg/case/gongzhong6.jpg',
        index: 3,
        className: '旅行',
        seeNum: 888,
        detailPic: [{
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-6-1.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-6-2.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-6-3.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-6-4.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-6-5.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-6-6.jpg'
        }]
      }, {
        title: '预约租车（包车）',
        img: 'http://mini.0315678.cn/wxImg/case/gongzhong7.jpg',
        index: 3,
        className: '旅行',
        seeNum: 888,
        detailPic: [{
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-7-1.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-7-2.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-7-3.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-7-4.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-7-5.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-7-6.jpg'
        }]
      }, {
        title: '预约租车（打车）',
        img: 'http://mini.0315678.cn/wxImg/case/gongzhong8.jpg',
        index: 3,
        className: '旅行',
        seeNum: 888,
        detailPic: [{
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-8-1.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-8-2.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-8-3.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-8-4.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-8-5.jpg'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-gongzhong/gongzhong-8-6.jpg'
        }]
      }]
    }, {
      name: '移动APP',
      cases: [{
        title: '优帮APP',
        img: 'http://mini.0315678.cn/wxImg/case/app1.jpg',
        className: '企业',
        index: 4,
        seeNum: 888,
        detailPic: [{
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-app/app-1.jpg',
          title: '发任务求帮助'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-app/app-2.jpg',
          title: '售技能赚外快'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-app/app-3.jpg',
          title: '友好指数管理'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-app/app-4.jpg',
          title: '我的个人中心'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-app/app-5.jpg',
          title: '发现身边牛人'
        }, {
          img: 'https://mini.0315678.cn/wxImg/case/case-detail/case-app/app-6.jpg',
          title: '首页同城任务'
        }]
      }]

    }, {
      name: '其他案例',
      cases: []
    }],
    currentClass: [],
    totalCases: [],
    width: 0,
    left: 0,
    barSize: [],
    noCan: false,  // 当微信版本低时启用
    currentIndex: 0 //  当前栏目类别
  },

  /**
   * 生命周期函数--监听页面加载
   */
  onLoad: function (options) {
    this.getTotalCases();
  },
  // 获取整个的案例
  getTotalCases() {
    var totalCases = [];
    this.data.topBar.forEach((item, index) => {
      if (index == 0) {
        return
      }
      item.cases.forEach((item, index) => {
        totalCases.push(item);
      })
    });
    this.setData({
      totalCases: totalCases,
      currentClass: totalCases
    })
  },
  //  用户点击导航控制小黄条
  onBarTap: function (e) {
    var index = e.currentTarget.dataset.index;
    if (index == 0) {
      this.setData({
        currentClass: this.data.totalCases,
        currentIndex: index
      })
    } else {
      this.setData({
        currentClass: this.data.topBar[index].cases,
        currentIndex: index
      })
    }
    if (!this.data.noCan) {
      this.setData({
        width: this.data.barSize[index].width,
        left: this.data.barSize[index].left
      })
    }
  },
  /**
   * 生命周期函数--监听页面初次渲染完成
   */
  onReady: function () {
    this.getSize();
  },
  // 获取导航条各个单位的宽度和位置
  getSize() {
    if (wx.createSelectorQuery) {
      var query = wx.createSelectorQuery();
      query.selectAll('.topbar-title').boundingClientRect();
      query.exec((res) => {
        var barSize = [];
        var width = res[0][0].width * 0.6;
        var left = res[0][0].width * 0.4 / 2;
        this.setData({
          width: width,
          left: left
        });
        res[0].forEach((item) => {
          var obj = {};
          obj.width = item.width * 0.6;
          obj.left = item.left + item.width * 0.2;
          barSize.push(obj);
        })
        this.setData({
          barSize: barSize
        })
      })
    } else {
      this.setData({
        noCan: true
      })
    }
  },
  onTapCase(e) {
    var classIndex = e.currentTarget.dataset.classindex;
    var currentIndex = this.data.currentIndex;
    var index = e.currentTarget.dataset.index;
    var caseClick = this.data.currentClass[index];
    var currentCase = JSON.stringify(caseClick.detailPic);
    switch (classIndex) {
      case 1:
        wx.navigateTo({
          url: './case-pc/case-pc?info=' + currentCase + '&title=' + caseClick.title
        })
        break;
      case 4:
      case 3:
        wx.navigateTo({
          url: './case-app/case-app?info=' + currentCase + '&title=' + caseClick.title + '&id=' + classIndex
        })
        break;

    }



  },
  /**
   * 生命周期函数--监听页面显示
   */
  onShow: function () {

  },

  /**
   * 生命周期函数--监听页面隐藏
   */
  onHide: function () {

  },

  /**
   * 生命周期函数--监听页面卸载
   */
  onUnload: function () {

  },

  /**
   * 页面相关事件处理函数--监听用户下拉动作
   */
  onPullDownRefresh: function () {

  },

  /**
   * 页面上拉触底事件的处理函数
   */
  onReachBottom: function () {

  },

  /**
   * 用户点击右上角分享
   */
  onShareAppMessage: function () {

  }
})